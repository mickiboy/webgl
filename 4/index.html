<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

    <title>WebGL Tutorial - Szenegraph</title>

    <link rel="stylesheet" href="/webgl_tutorial/semantic.min.css">
    <link rel="stylesheet" href="/webgl_tutorial/style.css">
  </head>

    <body>
<div class="ui vertical inverted sidebar menu">
    <a class="item" href="/webgl_tutorial/">Startseite</a>
    
    
    <a class="item" href="/webgl_tutorial/1/">Einrichtung</a>
    
    
    
    <a class="item" href="/webgl_tutorial/3/">Transformationen</a>
    
    
    
    <a class="item" href="/webgl_tutorial/2/">Shader</a>
    
    
    
    <a class="active item" href="/webgl_tutorial/4/">Szenegraph</a>
    
    
</div>

<div class="pusher">
    <div class="ui vertical post segment">
        <div class="ui container">
            <div class="ui secondary pointing menu">
                <a class="toc item"><i class="sidebar icon"></i></a>
                <a class="header item" href="/webgl_tutorial/">WebGL Tutorial</a>
                <div class="right menu">
                    
                    
                    <a class="item" href="/webgl_tutorial/1/">Einrichtung</a>
                    
                    
                    
                    <a class="item" href="/webgl_tutorial/3/">Transformationen</a>
                    
                    
                    
                    <a class="item" href="/webgl_tutorial/2/">Shader</a>
                    
                    
                    
                    <a class="active item" href="/webgl_tutorial/4/">Szenegraph</a>
                    
                    
                </div>
            </div>
        </div>

        <div class="ui text container">
            <h1 class="ui header">Szenegraph</h1>
            <p>In WebGL gibt es keine eingebaute Möglichkeit für Szenegraphen. Daher müssen wir uns eigene Hilfsfunktionen schreiben, um einen Szenegraphen darzustellen.</p>
<h2 id="Struktur-erstellen"><a href="#Struktur-erstellen" class="headerlink" title="Struktur erstellen"></a>Struktur erstellen</h2><p>Zuerst benötigen wir eine Datenstruktur, mit deren Hilfe wir den Szenegraphen aufbauen können. Dazu definieren wir einen Knoten:</p>
<pre><code class="js">var Node = function() {
  this.children = [];
  this.localMatrix = math.eye(4);
  this.worldMatrix = math.eye(4);
};
</code></pre>
<p>Nun benötigen wir eine Funktion, mit der man den Parent setzen kann:</p>
<pre><code class="js">Node.prototype.setParent = function(parent) {
  if (this.parent) {
    var i = this.parent.children.indexOf(this);

    if (i &gt;= 0) {
      this.parent.children.splice(i, 1);
    }
  }

  if (parent) {
    parent.children.append(this);
  }

  this.parent = parent;
};
</code></pre>
<p>Jetzt brauchen wir die Möglichkeit, die Weltmatrix anhand der Lokalmatrizen der Kinder zu aktualisieren:</p>
<pre><code class="js">Node.prototype.updateWorldMatrix = function(parentWorldMatrix) {
  if (parentWorldMatrix) {
    this.worldMatrix = math.multiply(this.localMatrix, parentWorldMatrix);
  } else {
    this.localMatrix = this.worldMatrix;
  }

  var worldMatrix = this.worldMatrix;
  this.children.forEach(function(child) {
    child.updateWorldMatrix(worldMatrix);
  });
};
</code></pre>
<h2 id="Beispieldaten"><a href="#Beispieldaten" class="headerlink" title="Beispieldaten"></a>Beispieldaten</h2><p>TODO</p>

        </div>
    </div>
</div>

        <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
        <script src="/webgl_tutorial/semantic.min.js"></script>
        <script src="/webgl_tutorial/helpers.js"></script>
        <script src="/webgl_tutorial/script.js"></script>
    </body>
</html>
